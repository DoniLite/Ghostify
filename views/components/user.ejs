<%- include('../header') %> 
<div
  id="container"
  class="w-full overflow-y-scroll bg-gray-950 text-white p-4"
  style="height: 100vh"
>
  <input type="hidden" name="usernameChanged", id="usernameChanged" value="<%= user %>">
  <div id="notificationPanel" class="fixed transNotificationHide  rounded-md transition-all top-[25%] lg:w-[40%] w-[80%] lg:left-[30%] left-[10%] shadow-lg bg-gray-800 text-white h-[25rem] overflow-y-scroll">
    <div class="flex w-full justify-between p-2">
      <div></div>
      <div id="closeNotificationPane" class=" z-50 cursor-pointer">
        <i class="fa-solid fa-xmark fa-2xl text-white"></i>
      </div>
    </div>
    <h1 class="font-bold text-xl relative -top-8 text-center">Notifications</h1>
    <div class="w-full flex flex-col gap-y-1.5 p-1">
      <!-- notification content -->
      <div class=" flex w-full justify-between p-2 rounded-md bg-gray-950 text-white">
        <div class="flex flex-col gap-y-2">
          <h2 class=" line-clamp-1 font-bold">Notification title here</h2>
          <p class=" line-clamp-1">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Quam sed necessitatibus nam eius, inventore ducimus.</p>
        </div>
        <div class="flex flex-col gap-y-2">
          <div id="notificationOptions" class="text-end cursor-pointer">
            <i class="fa-solid fa-xl fa-ellipsis-vertical text-white"></i>
          </div>
          <span class=" text-orange-500">now</span>
        </div>
      </div>
      <!-- notification end -->
    </div>
  </div>
  <div class="w-full lg:w-[95%] mx-auto mt-24">
    <input
      type="file"
      name="profileUpdate"
      id="profileUpdateInput"
      class="hidden"
    />
    <div class="w-full flex justify-between items-center">
      <div class="flex items-center gap-x-1 w-[60%]">
        <img
          src="<%= typeof userFile !== 'undefined' ? userFile : '/static/SVG/user.svg' %>"
          class="w-16 h-16 object-cover border-2 border-orange-500 rounded-full p-1 cursor-pointer"
          alt=" user profile"
          id="userProfileImg"
        />
        <input type="text" data-id="<%= userId %>" value="<%= user %>" class="text-orange-500 font-bold outline-none bg-transparent p-2" id="userNamePrint" readonly />
      </div>

      <div class="cursor-pointer indicator" id="notificationShower">
        <span class="indicator-item badge badge-secondary bg-red-400 rounded-full p-2 left-3 relative">99+</span>
        <i class="fa-solid fa-bell fa-2xl text-white"></i>
      </div>
    </div>
    <h1 class="mt-4 font-bold">Services</h1>
    <div class="mt-4 flex lg:flex-row flex-col gap-y-3 gap-x-6">
      <a href="/service?service=poster&userId=<%= userId %>">
        <div
          class="border-2 border-orange-500 rounded-lg p-3 w-[98%] lg:w-80 h-40 bg-transparent text-white flex flex-col gap-y-3"
        >
          <h2 class="font-bold">Poster</h2>
          <div class="flex w-full gap-x-6">
            <span class="text-orange-500 font-bold">Statut: </span>
            <div class="flex gap-x-3 items-center">
              <% if (typeof assets.service.Platform.internals === 'boolean' && assets.service.Platform.internals === true) { %>
                <%= 'active' %>
                <div class="w-3 h-3 rounded-full bg-green-700"></div> 
              <% } else { %>
                <%= 'spinned down' %>
                <div class="w-3 h-3 rounded-full bg-orange-500"></div>
              <% } %>
            </div>
          </div>

          <div class="flex w-full gap-x-6">
            <span class="text-orange-500 font-bold">Credits: </span>
            <div class="flex gap-x-3 items-center">
              <% if (typeof assets.posterCredits === 'number' && assets.posterCredits >= 150) { %>
                <%= assets.posterCredits %>
                <div class="w-3 h-3 rounded-full bg-green-700"></div> 
              <% } else { %>
                <%= assets.posterCredits %>
                <div class="w-3 h-3 rounded-full bg-orange-500"></div> 
              <% } %>
            </div>
          </div>

          <div class="flex w-full gap-x-6">
            <span class="text-orange-500 font-bold">Subscription: </span>
            <div class="flex gap-x-3 items-center">
              <% if (typeof assets.registered === 'boolean' && assets.registered === true) { %>
                <%= 'active' %>
                <div class="w-3 h-3 rounded-full bg-green-700"></div> 
              <% } else { %>
                <%= 'locked' %>
                <div class="w-3 h-3 rounded-full bg-orange-500"></div> 
              <% } %>
            </div>
          </div>
        </div>
      </a>

      <a href="/cvMaker">
        <div
          class="border-2 border-orange-500 rounded-lg p-3 w-[98%] lg:w-80 h-40 bg-transparent text-white flex flex-col gap-y-3"
        >
          <h2 class="font-bold">CVMaker</h2>
          <div class="flex w-full gap-x-6">
            <span class="text-orange-500 font-bold">Statut: </span>
            <div class="flex gap-x-3 items-center">
              <% if (typeof assets.service.Platform.internals === 'boolean' && assets.service.Platform.internals === true) { %>
                <%= 'active' %>
                <div class="w-3 h-3 rounded-full bg-green-700"></div> 
              <% } else { %>
                <%= 'spinned down' %>
                <div class="w-3 h-3 rounded-full bg-orange-500"></div> 
              <% } %>
            </div>
          </div>

          <div class="flex w-full gap-x-6">
            <span class="text-orange-500 font-bold">Credits: </span>
            <div class="flex gap-x-3 items-center">
              <% if (typeof assets.cvCredits === 'number' && assets.cvCredits >= 150) { %>
                <%= assets.cvCredits %>
                <div class="w-3 h-3 rounded-full bg-green-700"></div> 
              <% } else { %>
                <%= assets.cvCredits %>
                <div class="w-3 h-3 rounded-full bg-orange-500"></div> 
              <% } %>
            </div>
          </div>

          <div class="flex w-full gap-x-6">
            <span class="text-orange-500 font-bold">Subscription: </span>
            <div class="flex gap-x-3 items-center">
              <% if (typeof assets.registered === 'boolean' && assets.registered === true) { %>
                <%= 'active' %>
                <div class="w-3 h-3 rounded-full bg-green-700"></div> 
              <% } else { %>
                <%= 'locked' %>
                <div class="w-3 h-3 rounded-full bg-orange-500"></div> 
              <% } %>
            </div>
          </div>
        </div>
      </a>

      <% if (typeof assets.apiAccess === 'boolean' && assets.apiAccess === true) { %>
       <a href="#">
        <div
          class="border-2 border-orange-500 rounded-lg p-3 w-[98%] lg:w-80 h-40 bg-transparent text-white flex flex-col gap-y-3"
        >
          <h2 class="font-bold">APIs</h2>
          <div class="flex w-full gap-x-6">
            <span class="text-orange-500 font-bold">Statut: </span>
            <div class="flex gap-x-3 items-center">
              <% if (typeof assets.service.Platform.API === 'boolean' && assets.service.Platform.API === true) { %>
                <%= 'active' %>
                <div class="w-3 h-3 rounded-full bg-green-700"></div>
              <% } else { %>
                <%= 'spinned down' %>
                <div class="w-3 h-3 rounded-full bg-orange-500"></div>
              <% } %>
            </div>
          </div>

          <div class="flex w-full gap-x-6">
            <span class="text-orange-500 font-bold">Credits: </span>
            <div class="flex gap-x-3 items-center">
              <% if (typeof assets.apiCredits === 'number' && assets.apiCredits >= 150) { %>
                <%= assets.apiCredits %>
                <div class="w-3 h-3 rounded-full bg-green-700"></div> 
              <% } else { %>
                <%= assets.apiCredits %>
                <div class="w-3 h-3 rounded-full bg-orange-500"></div> 
              <% } %>
            </div>
          </div>

          <div class="flex w-full gap-x-6">
            <span class="text-orange-500 font-bold">Subscription: </span>
            <div class="flex gap-x-3 items-center">
              <% if (typeof assets.registered === 'boolean' && assets.registered === true) { %>
                <%= 'active' %>
                <div class="w-3 h-3 rounded-full bg-green-700"></div> 
              <% } else { %>
                <%= 'locked' %>
                <div class="w-3 h-3 rounded-full bg-orange-500"></div> 
              <% } %>
            </div>
          </div>
        </div>
      </a>
      <% } %>
    </div>

    <h1 class="mt-4 font-bold">Your posts</h1>

    <div
      class="mx-auto grid max-w-2xl grid-cols-1 gap-x-8 gap-y-16 border-t border-gray-200 pt-10 sm:mt-4 sm:pt-16 lg:mx-0 lg:max-w-none lg:grid-cols-3"
    >
      <% if (userPosts.length <= 0) { %>
       <div class=" w-full flex justify-center items-center my-4">
        <span class=" text-white font-bold">Vous ne disposez d'aucun post pour l'instant... Pensez à en <a href="/poster/new?service=poster" class=" text-orange-500">Créer</a></span>
       </div>
      <% } %>
      <% userPosts.forEach(article => { %>
      <article
        id="articleToFetch"
        data-id="<%= article.id %>"
        data-url="<%= article.url %>"
        class="hover:animate-background rounded-xl bg-gradient-to-r from-green-300 via-blue-500 to-purple-600 p-0.5 shadow-xl transition hover:bg-[length:400%_400%] hover:shadow-sm hover:[animation-duration:_4s] shadow-gray-700/25"
      >
        <div class="rounded-[10px] bg-white p-4 !pt-20 sm:p-6 dark:bg-gray-900">
          <time
            datetime="2022-10-10"
            class="block text-xs text-gray-500 dark:text-gray-400"
          >
            <%= article.createdAt %>
          </time>

          <a href="#">
            <h3
              class="mt-0.5 text-lg font-medium text-gray-900 dark:text-white"
            >
              <%= article.title %>
            </h3>
          </a>

          <div class="mt-4 flex flex-wrap gap-1">
            <% article.slugs.forEach(slug => { %>
            <span
              class="whitespace-nowrap rounded-full bg-purple-100 px-2.5 py-0.5 text-xs text-purple-600 dark:bg-purple-600 dark:text-purple-100"
            >
              <%= slug %>
            </span>
            <% }) %>
          </div>
        </div>
      </article>
      <% }) %>
    </div>

    <h1 class="mt-4 font-bold">Activity</h1>
    <hr class=" w-full mt-3">
    <div class=" max-w-2xl mx-auto p-3 gap-y-6 grid grid-cols-1 lg:grid-cols-3 lg:max-w-full lg:mx-0 lg:gap-x-2">
      <a href="#" class="w-full rounded-md flex flex-col gap-y-2 p-1 border-orange-500 border lg:w-[23%]">
        <span>Lorem ipsum dolor sit amet consectetur adipisicing elit. Pariatur rem non delectus error nobis a soluta quam quo nisi voluptate?</span>
        <img src="/static/img/random1.png" alt="content image" class="rounded-md w-full h-32 lg:h-64 object-cover">
      </a>
    </div>
  </div>
</div>
<%- include('../script') %>
<script type="module" src="/static/script/auth.js"></script>
<script type="module" src="/static/script/user.js"></script>
</body>
</html>